---
import Hero from "@components/Hero/Hero.astro";
import Shows from "@components/Shows/Shows.astro";
import siteData from "@config/siteData.json";
import { getCollection } from "astro:content";
import BaseLayout from "@layouts/BaseLayout.astro";

const showsCollection = await getCollection("shows");
// sort by date descending (newest first)
const showsSorted = showsCollection.sort(
	(a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime(),
);
---

<BaseLayout title={siteData.title} description={siteData.description} navStartStyle="white">
	<Hero />

	<section class="site-container" id="media">
		<h3 class="h3 mt-8 text-center">Teaser</h3>
		<div class="mt-4 aspect-video w-full overflow-hidden rounded shadow">
			<iframe
				src="https://www.youtube.com/embed/qzlStvyMxFA?rel=0"
				title="Panjrud Ensemble"
				allow="autoplay;encrypted-media"
				allowfullscreen
				class="block h-full w-full"></iframe>
		</div>
	</section>

	<section class="site-container" id="shows">
		<h3 class="h3 mt-8 text-center">Shows</h3>
		<Shows shows={showsSorted} />
	</section>
</BaseLayout>
